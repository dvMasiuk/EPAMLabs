@using GridMvc.Html
@model Grid.Mvc.Ajax.GridExtensions.AjaxGrid<SystemSales.Presentation.Models.SaleViewModel>

@Html.Grid(Model).Named("salesGrid").Columns(columns =>
{
    columns.Add(sale => sale.Date.Date).Titled("Date").Format("{0:dd.MM.yyyy}");
    columns.Add(sale => sale.Manager.Name).Titled("Manager Name");
    columns.Add(sale => sale.Customer.Name).Titled("Customer Name");
    columns.Add(sale => sale.Product.Name).Titled("Product Name");
    columns.Add(sale => sale.Sum);
    if (User.IsInRole("Admins"))
    columns.Add().Encoded(false).Sanitized(false).RenderValueAs(sale =>
        @<b>
            @Html.ActionLink("Edit", "Edit", new { id = sale.Id })<br/>
            @Html.ActionLink("Delete", "Delete", new { id = sale.Id }, htmlAttributes: new { onclick = "return deleteClick(this)" })
        </b>);
}).WithPaging(4).Filterable().WithMultipleFilters().Sortable()
